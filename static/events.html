<!DOCTYPE html>
<html>
<head>
	<title>Donation Aggregator Service</title>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Lato:900|Montserrat|Roboto&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="/static/styles/customstyles.css">
	<link rel="stylesheet" type="text/css" href="/static/styles/tagstyles.css">
	<link rel="stylesheet" type="text/css" href="/static/styles/navbar.css">
	<script>
		
			if(document.cookie.split("=")[0]!="loggedIn"){
				location.href="/login"
			}
			
	</script>
</head>
<body>
	<span id="eid" style="display:none"></span>
	<span id="cid" style="display: none"></span>
	<span id="uid" style="display: none"></span>
	
	<div class="navbar">
		<div class="left-bar">
			<span><i class="material-icons">home</i><a href="#">Home</a></span>
			<span><i class="material-icons">person</i><a href="http://localhost:5000/profile">Profile</a></span>
			<span><i class="material-icons">list_alt</i><a href="http://localhost:5000/events/0000">Create Event</a></span>
			<span><i class="material-icons">list_alt</i><a href="http://localhost:5000/event-listings">All Events</a></span>
		</div>
		<div class="right-bar">
			<span><a href="#">Login</a></span>
		</div>
	</div>
	<div class="bgimage">
		<img src="#" id="bgimage-img">
	</div>
	<div class="registerwindow">
        <div class="registerfraction">
            <div id="register-required">
                <span id="numerator">0</span>/<span id="denominator">1000</span>
            </div>
            <div id="register-load">

            </div>
        </div>
        <h4 id="register-blurb">Click here to register!</h4> 
		<div class="registerbutton" onclick="registerForEvent()">REGISTER</div>
		<br><br>
		<input id="registration-count" placeholder="Enter expected number of registrations">
	</div>
	<div class="registerwindow" id="register-2">
		<div class="tagcontainer">
			<p class="save-changes">Edit Page</p>
			<input class="edit-mode registerbutton" type="button" onclick="toggleEditingMode()" value="Edit Page">
			<p class="save-changes">Add FAQs</p>
			<input class="edit-mode registerbutton" type="button" onclick="toggleQuestions()" value="Answer Questions">
			<p>Page color</p>
			<input type="color" id="color-select" onchange="colorChanger(this)" value="#3e8e3e">
		</div>	
	</div>
	<div class="centercontent">
		<div class="contentbody">
			<div class="contentcover">
				<div class="unloaded-cover-picture">
					<i class="material-icons">add</i>
					<input type="file" onchange="loadCoverPic(this)">
				</div>
				<div class="loaded-cover-picture">
					<img id="cover-picture" src="#">
				</div>
            </div>
            <div class="contentbox">
                <div class="eventtitle" id="event-title" contenteditable="false"> Raising money for orphaned children in Bangalore</div>
            
                <div class="tag-box">
					<div class="tag-holder">

					</div>
					<div class="filter-tag">
						<p class="tag" id="add-tag" onclick="displayTagSearch()">Add tag<i id="tag-add" class="material-icons">add</i></p>
							<div id="tag-container">
								<div id="search-tags">
									<input spellcheck=false id="choose-tag" placeholder="Search tag" onfocus="getTagsList()" onkeyup="getTagsList()">
									<div id="tag-suggestions">
					
									</div>
								</div>
							</div>
					</div>
                </div>
            </div>
			<div class="contentbox overridegrid content-border" style="padding-top:0px;">
                <div class="eventorganizer subscribe-flex" id="subscribe-override">
					<h3 id="foundation-name" contenteditable="false">Ninaada Foundation</h3>
					<input class="registerbutton" type="button" onclick="subscribe()" value="Subscribe">
                </div>			
            </div>
			<div class="contentbox overridegrid content-border" style="border-bottom:1px solid rgba(0,0,0,0.1);border-top:1px solid rgba(0,0,0,0.1)"> 

				<div class="materials">
					<i class="material-icons" >my_location</i>
					<br>
					<input class="material-ip locked-input" id="location-name" value="Cubbon Park, Bangalore 560011">
				</div>
				<div class="materials">
					<i class="material-icons">date_range</i>
					<br>
					<input class="material-ip locked-input" type="datetime-local" id="event-date" value="12th February, 2020">
				</div>
				<div class="materials">
					<i class="material-icons">phone</i>
					<br>
					<input class="material-ip locked-input" id="phone-no" value="+91 987654321">
				</div>
				<div class="materials">
					<i class="material-icons">person</i>
					<br>
					<input class="material-ip locked-input" id="contact-name" value="Coordinator">
				</div>
			</div>
			<div class="contentbox">
				<div class="element-div text-blocks">
					<div class="h3-container">
						<h3 class="about" id="event-head" contenteditable="false" spellcheck="false"> How we want to help</h3>
					</div>
					<p class="small-text" id="event-details" contenteditable="false" spellcheck="false">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				</div>
			</div>
			<div class="contentbox">
				<div class="element-div">
					<div class="h3-container" id="widget-row-x">
						<button  onclick="delElement(this)"> <i class="material-icons">close</i></button>
					</div>
					<div class="flex-row-box">
						<div class="frame-box" onclick="loadWidgetMenu(this)">
							<div class="frame-button">
								<i class="material-icons">add</i>
							</div>
							<iframe class="custom-widget" src=""></iframe>
						</div>
						<div class="frame-box" onclick="loadWidgetMenu(this)">
							<div class="frame-button">
								<i class="material-icons">add</i>
							</div>
							<iframe class="custom-widget" src=""></iframe>
						</div>
					</div>
				</div>
			</div>
            <div class="faqcontainer">
					<h3 class="about" spellcheck="false">FAQs</h3>
					
					<div class="faq-ask">
						<input type="text" class="addfaq" placeholder="Ask a question">
						<div class="registerbutton" onclick="ask()">Ask us a question!</div>
					</div>
				</div>
		</div>
	</div>

	<div class="question-modal">
		<div class="question-box">
			<div class="upper-nav">
				<h1>Questions</h1>
				<i class="material-icons close-q" class="material-icons" onclick="closeQuestions()">close</i>
			</div>
		</div>
	</div>

	<div class="widget-menu" id="widget-menu-1">
		<div class="close-div" onclick="loadWidgetMenu('close')">
			<h3>Widgets</h3>
			<i class="material-icons close-widget">close</i>
		</div>
		<div class="widgets" id="widget-1" onclick="addWidget('calendar')">
			<h3>Calendar</h3>
		</div>
		<div class="widgets" id="widget-1" onclick="addWidget('quote')">
			<h3>Quotes</h3>
		</div>
	</div>

	<div class="widget-menu" id="widget-menu-2">
		<div class="close-div" onclick="loadComponentMenu()">
			<h3>Components</h3>
			<i class="material-icons close-widget">close</i>
		</div>
		<div class="widgets" id="component-1" onclick="addComponents(1)">
			
		</div>
		<div class="widgets" id="component-2" onclick="addComponents(2)">

		</div>
		<div class="widgets" id="component-3" onclick="addComponents(3)">

		</div>
	</div>

	<script>
            var componentToggle = false
            var widgetToggle = false
            var selectedFrame = null
            var editMode = false
			var imageRows = 3
			var currentColor = "#3e8e3e"
            function loadComponentMenu(){
                componentToggle = !componentToggle
                if(componentToggle && widgetToggle){
                    $("#widget-menu-2").animate({"right":"0"},"fast")
                    $("#widget-menu-1").animate({"right":"-350"},"fast")
					$(".registerwindow").animate({"right":"80px"},"fast")
                    widgetToggle = false
                }else{
                    if(componentToggle){
                        $("body").animate({"left":"-250px"},"fast")
						$("#register-2").animate({"right":"80px"},"fast")
                        $("#widget-menu-2").animate({"right":"0"},"fast")
						$(".registerwindow").animate({"right":"80px"},"fast")
                    }
                    else{
                        $("body").animate({"left":"0px"},"fast")
                        $("#widget-menu-2").animate({"right":"-350"},"fast")
						$(".registerwindow").animate({"right":"330px"},"fast")
                    }
                    
                }

            
            }

			var mode = null

			$("body").ready(function(){

				var eid = window.location.href.split("/")[window.location.href.split("/").length-1]
				$("#eid").text(eid)
				var data = document.cookie.split("=")[1]
				$("#cid").text(data)
				$("#uid").text(data)
				if(window.location.href.split("/")[window.location.href.split("/").length-1]!="0000"){
					mode="update"
					$("body").css({"opacity":"0"})
					$.ajax({
						url:"/"+$("#eid").text()+"/view-event",
						method:"get",
						success:function(data){
							console.log("Received page data")
							pageBuilder(data)
						}
					})
				}
				else{
					mode="create"
				}

				
			})

			function pageBuilder(data){

				var cookie = document.cookie.split("=")[1]
				console.log(data)
				if(data["cid"]!=cookie){
					$("#register-2").remove()
				}
				colorReplace(0,data["color"])
				data["tags"].forEach((ele,ind)=>{
					$(".tag-holder").append($("<p></p>").css({"background":currentColor}).attr("class","tag").attr("id",ele).text(ele+"   "+"x").click(function(){
						tagArray.push($(this).text().split(" ")[0])
						$(this).remove()
						tagCount--
					}))
				})

				$("#foundation-name").text(data["foundation-name"])
				$("#event-title").text(data["event-name"])
				$("#event-head").text(data["event-head"])
				$("#event-details").text(data["event-details"])
				$("#location-name").val(data["location-name"])
				$("#location-link").val(data["location-link"])
				$("#event-date").val(data["event-date"])
				$("#phone-no").val(data["phone-no"])
				$("#contact-name").val(data["contact-name"])
				colorReplace(currentColor,data["color"])

				var wid = $(".custom-widget");
				wid.each((ind, element)=>{
					$(element).attr("src", data["widgets"][ind])
					$($(element).parent().find(".frame-button")).hide()
				})

				$("#color-select").val(data["color"])

				$("#denominator").text(data["registration-count"])
				$("#registration-count").val(data["registration-count"])
				loadCoverFromBase64(data["cover-picture"])
				getAnsweredFAQ()
				colorReplace(currentColor,data["color"])
				$("body").css({"opacity":"1"})
			}
			

			$(".editable-p").on("focus",function(){
				if($(this).html()=="Sample Text"){
					$(this).html("&zwnj;")
				}
			})

			$(".editable-p").on("blur",function(){
				if($(this).html()=="\u200c"){
					$(this).html("Sample Text")
				}
			})
            
            function callLoaders(){
                followCount()
            }

            function delElement(ref){
                $(ref).parent().parent().parent().slideUp(350,function(){
                    $(this).remove()
                })
            }

			function delImgRow(ob){
				$(ob).parent().slideUp(function(){
					$(ob).parent().remove()
				})
			}

			function subscribe(){
				$.ajax({
					url:"http://localhost:5000/"+$("#uid").text()+"/follow",
					method:"post",
					success:function(data){
						console.log("Subscribed")
					}
				})
			}

            function loadCoverPic(input){
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $($(input).parent().parent().children(".loaded-cover-picture").children()[0]).attr('src', e.target.result);
                        $(input).parent().parent().children(".loaded-cover-picture").show()
                        $(input).parent().css({"opacity":"0"})
						$("#bgimage-img").attr("src",e.target.result)
						$("body").css({"background":"none"})
                    };

                    reader.readAsDataURL(input.files[0]);
                }
            }

			function loadCoverFromBase64(enc){
				$("#cover-picture").attr('src', "data:image/png;base64,"+enc);
				$("#cover-picture").show()
				$(".unloaded-cover-picture").css({"opacity":"0"})
				$("#bgimage-img").attr("src","data:image/png;base64,"+enc)
				$("body").css({"background":"none"})
			}

            function loadImage(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $($(input).parent().parent().children(".img-container-loaded").children()[0]).attr('src', e.target.result);
                        $(input).parent().parent().children(".img-container-loaded").show()
                        $(input).parent().css({"opacity":"0"})
                    };

                    reader.readAsDataURL(input.files[0]);
                }
            }
            
            function loadWidgetMenu(frameParent){
                widgetToggle = true
                if(componentToggle && widgetToggle){
                    $("#widget-menu-1").animate({"right":"0"},"fast")
                    $("#widget-menu-2").animate({"right":"-350"},"fast")
					
                    componentToggle = false
                }
                else{
                    if(frameParent=='close'){
                        $("body").animate({"left":"0px"},"fast")
                        $("#widget-menu-1").animate({"right":"-350"},"fast")
						$("#register-2").animate({"right":"80px"},"fast")
						$(".registerwindow").animate({"right":"80px"},"fast")
                        widgetToggle = false
                    }
                    else{
                        $("body").animate({"left":"-250px"},"fast")
                        $("#widget-menu-1").animate({"right":"0"},"fast")
						$(".registerwindow").animate({"right":"330px"},"fast")
                        widgetToggle = true
                        
                    }

                }
                selectedFrame = frameParent
            }

            function addWidget(path){
                $($(selectedFrame).children()[1]).attr("src","http://localhost:5000/"+$("#eid").text()+"/"+path)
                $($(selectedFrame).children()[0]).hide()
            }

            function addComponents(no){
                switch(no){
                    case 2:
                        $(`<div class="contentbox">
								<div class="element-div">
									<div class="h3-container">
										<h3 class="about"  contenteditable="false"> Our Events</h3>
										<button  onclick="delElement(this)"> <i class="material-icons">close</i></button>
									</div>
									<div class="flex-row-box">
										<div class="frame-box" onclick="loadWidgetMenu(this)">
											<div class="frame-button">
												<i class="material-icons">add</i>
											</div>
											<iframe class="custom-widget" src=""></iframe>
										</div>
										<div class="frame-box" onclick="loadWidgetMenu(this)">
											<div class="frame-button">
												<i class="material-icons">add</i>
											</div>
											<iframe class="custom-widget" src=""></iframe>
										</div>
										<div class="frame-box" onclick="loadWidgetMenu(this)">
											<div class="frame-button">
												<i class="material-icons">add</i>
											</div>
											<iframe class="custom-widget" src=""></iframe>
										</div>
									</div>
								</div>
							</div>`).insertBefore(".faqcontainer")
												
                        break;
                }
            }

            var percentgrowth = 0
            
            function followCount(){
                percentgrowth+= 100 / parseInt($("#denominator").text())
                $("#numerator").text(parseInt($("#numerator").text())+1)
                $("#register-load").css({"width":percentgrowth+"%"})
                
                if($("#numerator").text()=="421"){
                    clearInterval(followCounterInterval)
                }
            }

			function getUnAnsweredFAQ(){
				
				$.ajax({
					url:"http://localhost:5000/charity/event/getunAnsweredFAQ",
					method:"post",
					data:JSON.stringify({"CharityID":$("#cid").text(),"EventID":$("#eid").text()}),
					contentType:"application/json",
					success:function(data){
						buildQuestions(data)
					}
				})

			}

			function buildQuestions(data)
            {

				data.forEach((ele)=>{
					console.log(ele)
					$(".question-box").append($(`<div class="questions">
						<h4 class="question-q">`+ele["Query"]+`</h4>
						<input class="answer-q" placeholder="Enter your answer">
						<input type="button" class="answer-button" onclick="answerQuestion(this)"" value="Answer">
					</div>`).attr("id",ele["FaqID"]))
				})
				
			}

			function ask(){
				$.ajax({
					url:"http://localhost:5000/charity/event/initQuery",
					method:"post",
					data:JSON.stringify({"QueryString":$(".addfaq").val(),"CharityID":$("#cid").text(),"EventID":$("#eid").text()}),
					contentType:"application/json",
					success:function(data){
						console.log($(".addfaq").val())
					}
				})
				
			}

			function getBase64Image(img) {
				if(img.src==(window.location.href+"#")){
					return null
				}
				var canvas = document.createElement("canvas");
				canvas.width = img.width;
				canvas.height = img.height;
				var ctx = canvas.getContext("2d");
				ctx.drawImage(img, 0, 0);
				var dataURL = canvas.toDataURL("image/png");
				return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
			}

			function answerQuestion(ob){
				
				$.ajax({
					url:"http://localhost:5000/charity/event/answerQuery",
					method:"post",
					data:JSON.stringify({"Answer":$($(ob).parent().find(".answer-q")).val(),"CharityID":$("#cid").text(),"EventID":$("#eid").text(),"FaqID":parseInt($(ob).parent().attr("id"))}),
					contentType:"application/json",
					success:function(data){
						
						$(`<div class="faq">
							<div class="question">
								`+$($(ob).parent().find(".question-q")).text()+`
							</div>
							<div class="answer">
							`+$($(ob).parent().find(".answer-q")).val()+`
							</div>
						</div>`).insertBefore(".faq-ask")
						$($(ob).parent()).remove()
						
					}
				})
			}

			function getAnsweredFAQ(){
				$.ajax({
					url:"http://localhost:5000/charity/event/getAnsweredFAQ",
					method:"post",
					data:JSON.stringify({"CharityID":$("#cid").text(),"EventID":$("#eid").text()}),
					contentType:"application/json",
					success:function(data){
						data.forEach((ele)=>{
							$(`<div class="faq">
								<div class="question">
									`+ele["Query"]+`
								</div>
								<div class="answer">
								`+ele["Answer"]+`
								</div>
							</div>`).insertBefore(".faq-ask")
						})
					}
				})
			}

			function saveData(){

				var eventsRows = $(".image-row")
				var reader = new FileReader();
				var pageData = {

					"cover-picture":getBase64Image($("#cover-picture")[0]),
					"type":"event",
					"foundation-name":$("#foundation-name").text(),
					"event-title":$("#event-title").text(),
					"event-head":$("#event-head").text(),
					"event-details":$("#event-details").text(),
					"location-name":$("#location-name").val(),
					"location-link":$("#location-link").val(),
					"event-date":$("#event-date").val(),
					"phone-no":$("#phone-no").val(),
					"contact-name":$("#contact-name").val(),
					"registration-count":$("#registration-count").val(),
					"color":currentColor,
					"widgets":[],
					"tags":[]
				}
				var wid = $(".custom-widget");
				wid.each((ind, element)=>{
					pageData["widgets"].push($(element).attr('src'))
				})

				var tags = $(".tag")

				tags.each((ind,element)=>{
					if(ind!=tags.length-1){
						pageData["tags"].push($(element).text().split(" ")[0])
					}
					
				})

				console.log(pageData)				

				if(mode=="create"){
					$.ajax({
						url:"/"+$("#cid").text()+"/create-event",
						async:true,
						method:"post",
						cache: false,
						data: JSON.stringify(pageData),
						contentType: "application/json",
						success:function(){

							console.log("sent")
						}
					})
				}
				else{
					$.ajax({
						url:"/"+$("#eid").text()+"/update-event",
						async:true,
						method:"put",
						cache: false,
						data: JSON.stringify(pageData),
						contentType: "application/json",
						success:function(){

							console.log("sent")
						}
					})
				}

			}

            function toggleEditingMode(){


                if(editMode){
                    editMode = false
					$(".material-ip").css({"animation":"none"}).addClass("locked-input")
					$(".h3-container button").hide()
					$(".frame-box").css({"pointer-events":"none","animation":"none"})
					$("input[type='file']").css({"pointer-events":"none"})
					$(".del-btn").hide()
					$(".about").css({"border":"none","animation":"none"})
					$("div[contenteditable='true']").css({"animation":"none"}).attr("contenteditable","false")
					$("#add-tag").hide()
					$(".filter-tag").hide()
					$(".small-text").css({"animation":"none"})
					$($(".edit-mode")[0]).val("Edit Page")
					$($(".save-changes")[0]).text("Edit Page")
					$("#registration-count").hide()
					$(".frame-button").hide()
					saveData()
                }
                else{
                    editMode = true
					$(".material-ip").css({"animation":"0.6s shake","animation-iteration-count":"infinite"}).removeClass("locked-input")
					$(".small-text").css({"animation":"0.6s shake","animation-iteration-count":"infinite"})
					$("#edit-btn").show()
					$(".h3-container button").show()
					$(".frame-box").css({"pointer-events":"auto"})
					$("input[type='file']").css({"pointer-events":"auto"})
					$(".del-btn").show()
					$(".about").css({"animation":"0.6s shake","animation-iteration-count":"infinite","border":"1px solid rbga(0,0,0,0.1)"})
					$("div[contenteditable='false']").css({"animation":"0.6s shake","animation-iteration-count":"infinite"}).attr("contenteditable","true")
					$("#add-tag").show()
					$(".filter-tag").show()
					$(".faqcontainer h3").css({"animation":"none"})
					$($(".edit-mode")[0]).val("Save Changes")
					$($(".save-changes")[0]).text("Save Changes")
					$("#registration-count").show()
					$(".frame-button").show()
                }
				
				$("p[contenteditable] , h3[contenteditable],h4[contenteditable]").attr("contenteditable",editMode)
            }

            followCounterInterval = setInterval(followCount,1)


			

			function colorChanger(ob,onrender=false){
				if(onrender==false){
					colorReplace(currentColor,ob.value)
					currentColor = ob.value
				}
				else{
					colorReplace(currentColor,onrender)
					currentColor = onrender
				}				
			}

			function greenReplace(){
				colorReplace("#3e8e3e",currentColor)
			}
			
			function colorReplace(findHexColor, replaceWith) {
				console.log(findHexColor,replaceWith)
				function rgb2hex(rgb) {
					if (/^#[0-9A-F]{6}$/i.test(rgb)) return rgb;
					rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
					function hex(x) {
					return ("0" + parseInt(x).toString(16)).slice(-2);
					}
					return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
				}

				// Select and run a map function on every tag
				$('*').map(function(i, el) {
					// Get the computed styles of each tag
					var styles = window.getComputedStyle(el);

					// Go through each computed style and search for "color"
					Object.keys(styles).reduce(function(acc, k) {
					var name = styles[k];
					var value = styles.getPropertyValue(name);
					if (value !== null && name.indexOf("color") >= 0) {
						// Convert the rgb color to hex and compare with the target color
						if (value.indexOf("rgb(") >= 0 && rgb2hex(value) === findHexColor) {
						// Replace the color on this found color attribute
						$(el).css(name, replaceWith);
						}
					}
					});
				});
			}

			function registerForEvent(){
				$.ajax({
					url:"/"+$("#eid").text()+"/register",
					method:"post",
					data:JSON.stringify({"eid":$("#eid").text(),"cid":$("#cid").text()}),
					success:function(data){

					}
				})
			}

			function toggleQuestions(){
				getUnAnsweredFAQ()
				$(".question-modal").animate({"height":"100%"},"fast",function(){
					$(".question-box").fadeIn()
				})
			}

			function closeQuestions(){
				$(".question-box").fadeOut("fast",function(){
					$(".question-modal").animate({"height":"0%"},"fast")
				})
			}

		</script>
		<script>

			var tagCount = 0
			var tagArray = ["Poverty","Donation","Food and Water","Education","Service","Charity","Social Help"]

			$("#tag-container").hover(
				function() {
					$("#tag-suggestions p").show();
				},
				function() {
					$("#tag-suggestions p").hide();
			});

			function getTagsList(){
				tagArray.sort()
				$("p").remove(".tag-fields")
				tagArray.forEach(element => {
					if(element.toLowerCase().match($("#choose-tag").val().toLowerCase())){
						$("#tag-suggestions").append($("<p></p>").text(element).attr("class","tag-fields").click(function(){
							if(tagCount<3){
								var tagTxt = ""
								tagTxt+=element
								if($("#"+tagTxt).length==0){
									$(".tag-holder").append($("<p></p>").css({"background":currentColor}).attr("class","tag").attr("id",tagTxt).text(tagTxt+"   "+"x").click(function(){
										tagArray.push($(this).text().split(" ")[0])
										$(this).remove()
										tagCount--
									}))
								}
								tagArray.splice(tagArray.indexOf(element),1)
								$("#tag-suggestions").empty()
								getTagsList()
								tagCount++
							}
							else{
								alert("Only 3 tags are allowed!")
							}
						}))
					}
				});
			}

			function displayTagSearch(){
				$("#tag-container").show()
			}
		</script>
</body>
</html>